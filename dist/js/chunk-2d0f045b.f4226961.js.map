{"version":3,"sources":["webpack:///./src/views/submit/components/DraftsDialog.vue?5460","webpack:///src/views/submit/components/DraftsDialog.vue","webpack:///./src/views/submit/components/DraftsDialog.vue?810a","webpack:///./src/views/submit/components/DraftsDialog.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","draftDialog","expression","_v","drafts","_l","draft","index","key","id","staticClass","on","$event","deleteDraft","_s","title","type","replace","c","toUpperCase","community","name","$moment","timestamp","fromNow","theme","color","inProgress","startEditingDraft","staticRenderFns","component","VBtn","VCard","VCardText","VCardTitle","VDialog","VIcon","VList","VListItem","VListItemAction","VListItemAvatar","VListItemContent","VListItemSubtitle","VListItemTitle"],"mappings":"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","file":"js/chunk-2d0f045b.f4226961.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"max-width\":\"600\"},model:{value:(_vm.draftDialog),callback:function ($$v) {_vm.draftDialog=$$v},expression:\"draftDialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Your Drafts\")]),_c('v-card-text',[(_vm.drafts.results)?_c('v-list',_vm._l((_vm.drafts.results),function(draft,index){return _c('v-list-item',{key:draft.id},[_c('v-list-item-avatar',{staticClass:\"d-flex align-center justify-center\",attrs:{\"color\":\"error lighten-5\"}},[_c('v-btn',{attrs:{\"color\":\"error\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.deleteDraft(draft.id, index)}}},[_c('v-icon',[_vm._v(\"mdi-delete\")])],1)],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(draft.title))]),_c('v-list-item-subtitle',[_c('span',[_c('b',[_vm._v(\"Type:\")]),_vm._v(\" \"+_vm._s(draft.type.replace(/^\\w/, function (c) { return c.toUpperCase(); })))]),_c('v-icon',[_vm._v(\"mdi-circle-small\")]),_c('span',[_c('b',[_vm._v(\"In behalf of:\")]),_vm._v(\" \"+_vm._s((draft.community) ? draft.community.name : 'Yourself'))])],1),_c('v-list-item-subtitle',[_c('span',[_c('b',[_vm._v(\"Last updated:\")]),_vm._v(\" \"+_vm._s(_vm.$moment(draft.timestamp).fromNow()))])])],1),_c('v-list-item-action',[_c('v-btn',{attrs:{\"rounded\":\"\",\"color\":(draft.community) ? draft.community.theme.color : 'primary',\"disabled\":(_vm.inProgress && _vm.inProgress.id === draft.id)},on:{\"click\":function($event){return _vm.startEditingDraft(draft)}}},[_vm._v(\" \"+_vm._s(_vm.inProgress ? _vm.inProgress.id === draft.id ? 'In Progress' :'Start Editing' : 'Start Editing')+\" \")])],1)],1)}),1):_c('div',[_vm._v(\"No drafts saved yet.\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<v-dialog\n\t\tv-model=\"draftDialog\"\n\t\tmax-width=\"600\"\n\t>\n\t\t<v-card>\n\t\t\t<v-card-title>Your Drafts</v-card-title>\n\t\t\t<v-card-text>\n\t\t\t\t<v-list v-if=\"drafts.results\">\n\t\t\t\t\t<v-list-item v-for=\"(draft, index) in drafts.results\"\n\t\t\t\t\t\t:key=\"draft.id\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<v-list-item-avatar color=\"error lighten-5\"\n\t\t\t\t\t\t\tclass=\"d-flex align-center justify-center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<v-btn color=\"error\"\n\t\t\t\t\t\t\t\t@click=\"deleteDraft(draft.id, index)\" icon>\n\t\t\t\t\t\t\t\t<v-icon>mdi-delete</v-icon>\n\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t</v-list-item-avatar>\n\t\t\t\t\t\t<v-list-item-content>\n\t\t\t\t\t\t\t<v-list-item-title>{{draft.title}}</v-list-item-title>\n\t\t\t\t\t\t\t<v-list-item-subtitle>\n\t\t\t\t\t\t\t\t<span><b>Type:</b> {{draft.type.replace(/^\\w/, (c) => c.toUpperCase())}}</span>\n\t\t\t\t\t\t\t\t<v-icon>mdi-circle-small</v-icon>\n\t\t\t\t\t\t\t\t<span><b>In behalf of:</b> {{(draft.community) ? draft.community.name : 'Yourself'}}</span>\n\t\t\t\t\t\t\t</v-list-item-subtitle>\n\t\t\t\t\t\t\t<v-list-item-subtitle>\n\t\t\t\t\t\t\t\t<span><b>Last updated:</b> {{$moment(draft.timestamp).fromNow()}}</span>\n\t\t\t\t\t\t\t</v-list-item-subtitle>\n\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\t<v-list-item-action>\n\t\t\t\t\t\t\t<v-btn rounded :color=\"(draft.community) ? draft.community.theme.color : 'primary'\"\n\t\t\t\t\t\t\t\t@click=\"startEditingDraft(draft)\"\n\t\t\t\t\t\t\t\t:disabled=\"(inProgress && inProgress.id === draft.id)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{\tinProgress\n\t\t\t\t\t\t\t\t\t? inProgress.id === draft.id\n\t\t\t\t\t\t\t\t\t\t? 'In Progress'\n\t\t\t\t\t\t\t\t\t\t:'Start Editing'\n\t\t\t\t\t\t\t\t\t: 'Start Editing'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t</v-list-item-action>\n\t\t\t\t\t</v-list-item>\n\t\t\t\t</v-list>\n\t\t\t\t<div v-else>No drafts saved yet.</div>\n\t\t\t</v-card-text>\n\t\t</v-card>\n\t</v-dialog>\n</template>\n\n<script>\nimport {mapGetters} from \"vuex\";\nimport Snack from \"@/mixin/Snack.js\";\n\nexport default {\n\tname: \"DraftsDialog\",\n\tmixins: [Snack],\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tinProgress: \"publication/inProgress\",\n\t\t\tdrafts: \"publication/draftList\",\n\t\t}),\n\t\tdraftDialog: {\n\t\t\tget() {\n\t\t\t\treturn this.$store.getters.draftState\n\t\t\t},\n\t\t\tset(v) {\n\t\t\t\tthis.$store.dispatch(\"setDraftState\", v)\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tstartEditingDraft(draft) {\n\t\t\t// TODO: check for current content and save for edit\n\t\t\t// do not start in progress draft\n\t\t\tif (this.inProgress) {\n\t\t\t\tif(this.inProgress.id === draft.id) return\n\t\t\t}\n\t\t\tthis.$store.dispatch(\"publication/setInProgress\", draft)\n\t\t\tthis.draftDialog = false\n\t\t\tthis.$emit(\"initDraft\")\n\t\t},\n\t\tdeleteDraft(id) {\n\t\t\tconst url = this.$util.format(this.$urls.publication.detail, id)\n\t\t\tthis.$axios.delete(url)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (id === this.inProgress.id) {\n\t\t\t\t\t\tthis.$store.dispatch(\"publication/setInProgress\", null)\n\t\t\t\t\t\tthis.$emit(\"startNew\")\n\t\t\t\t\t}\n\t\t\t\t\tthis.$store.dispatch(\"publication/removeDraftItem\", id)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tif (this.drafts.count === 0) this.draftDialog = false\n\t\t\t\t\t\t})\n\t\t\t\t\tthis.openSuccessSnack(\"Draft deleted successfully.\")\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.openSnack(\"Something went wrong. Please try again.\")\n\t\t\t\t})\n\t\t},\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraftsDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DraftsDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DraftsDialog.vue?vue&type=template&id=18e46ec6&scoped=true&\"\nimport script from \"./DraftsDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./DraftsDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18e46ec6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VDialog,VIcon,VList,VListItem,VListItemAction,VListItemAvatar,VListItemContent,VListItemSubtitle,VListItemTitle})\n"],"sourceRoot":""}