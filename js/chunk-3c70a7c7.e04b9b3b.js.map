{"version":3,"sources":["webpack:///./src/mixin/FilesMixin.js","webpack:///./src/views/submit/components/SubmitMedia.vue?7e46","webpack:///src/views/submit/components/SubmitMedia.vue","webpack:///./src/views/submit/components/SubmitMedia.vue?be37","webpack:///./src/views/submit/components/SubmitMedia.vue"],"names":["FilesMixin","data","files","fileUrls","totalSize","methods","clearFiles","this","removeFile","item","index","splice","size","addTargetFilesToList","filesList","forEach","file","push","URL","createObjectURL","fileInputChanged","e","Array","from","target","dragFile","dataTransfer","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_l","key","on","$event","_v","payload","title","postImage","_e","class","theme","color","length","directives","name","rawName","value","expression","ref","$refs","fileInput","click","staticRenderFns","component","VBtn","VCard","VCol","VIcon","VRow","VScaleTransition"],"mappings":"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","file":"js/chunk-3c70a7c7.e04b9b3b.js","sourcesContent":["const FilesMixin = {\n\tdata: () => ({\n\t\tfiles: [],\n\t\tfileUrls: [],\n\t\ttotalSize: null,\n\t}),\n\tmethods: {\n\t\tclearFiles() {\n\t\t\tthis.files = []\n\t\t\tthis.fileUrls = []\n\t\t\tthis.totalSize = null\n\t\t},\n\t\tremoveFile(item, index) {\n\t\t\tthis.files.splice(index, 1)\n\t\t\tthis.fileUrls.splice(index, 1)\n\t\t\tthis.totalSize -= item.size\n\t\t},\n\t\taddTargetFilesToList(filesList) {\n\t\t\tfilesList.forEach(file => {\n\t\t\t\tthis.files.push(file)\n\t\t\t\tthis.fileUrls.push(URL.createObjectURL(file))\n\t\t\t\tthis.totalSize += file.size\n\t\t\t})\n\t\t},\n\t\tfileInputChanged(e) {\n\t\t\tconst filesList = Array.from(e.target.files)\n\t\t\tthis.addTargetFilesToList(filesList)\n\t\t},\n\t\tdragFile(e) {\n\t\t\tconst filesList = Array.from(e.dataTransfer.files)\n\t\t\tthis.addTargetFilesToList(filesList)\n\t\t},\n\t}\n}\n\nexport default FilesMixin\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-scale-transition',[(_vm.files.length)?_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-row',{staticClass:\"ma-0 pa-0\"},_vm._l((_vm.fileUrls),function(item,index){return _c('v-col',{key:index,attrs:{\"cols\":\"4\"}},[_c('card-img',{attrs:{\"max-width\":\"400\",\"contain\":\"\",\"height\":\"150\",\"src\":item}},[_c('div',{staticClass:\"d-flex\"},[_c('v-btn',{staticClass:\"clear-btn\",attrs:{\"icon\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.removeFile(item, index)}}},[_c('v-icon',[_vm._v(\"mdi-close-circle\")])],1),_c('v-btn',{staticClass:\"post-btn\",attrs:{\"icon\":\"\",\"color\":\"success\",\"disabled\":!_vm.payload.title},on:{\"click\":function($event){return _vm.postImage(item, index)}}},[_c('v-icon',[_vm._v(\"mdi-check-circle\")])],1)],1)])],1)}),1)],1):_vm._e()],1),_c('v-card',{staticClass:\"d-flex align-center justify-center flex-wrap\",class:_vm.theme.color+'-border',attrs:{\"min-height\":_vm.files.length ? 100 : 200,\"flat\":\"\"},on:{\"drop\":_vm.dragFile}},[_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"fileInput\",staticClass:\"file-input\",attrs:{\"id\":\"file-input\",\"type\":\"file\",\"multiple\":\"\",\"accept\":\"image/*\"},on:{\"change\":_vm.fileInputChanged}}),_c('div',{staticClass:\"weight-500 text-center\",class:_vm.theme.color + '--text'},[_vm._v(\" Drag and drop images or \")]),_c('div',{staticClass:\"px-2\"},[_c('v-btn',{staticClass:\"weight-700\",attrs:{\"outlined\":\"\",\"color\":_vm.theme.color,\"rounded\":\"\"},on:{\"click\":function($event){return _vm.$refs.fileInput.click()}}},[_vm._v(\" Upload \")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<v-scale-transition>\n\t\t\t<v-col v-if=\"files.length\"\n\t\t\t\tcols=\"12\"\n\t\t\t>\n\t\t\t\t<v-row\n\t\t\t\t\tclass=\"ma-0 pa-0\"\n\t\t\t\t>\n\t\t\t\t\t<v-col v-for=\"(item, index) in fileUrls\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\tcols=\"4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<card-img max-width=\"400\"\n\t\t\t\t\t\t\tcontain\n\t\t\t\t\t\t\theight=\"150\"\n\t\t\t\t\t\t\t:src=\"item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"d-flex\">\n\t\t\t\t\t\t\t\t<v-btn class=\"clear-btn\"\n\t\t\t\t\t\t\t\t\ticon color=\"error\"\n\t\t\t\t\t\t\t\t\t@click=\"removeFile(item, index)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<v-icon>mdi-close-circle</v-icon>\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t<v-btn class=\"post-btn\"\n\t\t\t\t\t\t\t\t\ticon color=\"success\"\n\t\t\t\t\t\t\t\t\t@click=\"postImage(item, index)\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!payload.title\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<v-icon>mdi-check-circle</v-icon>\n\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</card-img>\n\t\t\t\t\t</v-col>\n\t\t\t\t</v-row>\n\t\t\t</v-col>\n\t\t</v-scale-transition>\n\t\t<v-card\n\t\t\t:min-height=\"files.length ? 100 : 200\" flat\n\t\t\tclass=\"d-flex align-center justify-center flex-wrap\"\n\t\t\t:class=\"theme.color+'-border'\"\n\t\t\t@drop=\"dragFile\"\n\t\t>\n\t\t\t<input\n\t\t\t\tv-show=\"false\"\n\t\t\t\tid=\"file-input\"\n\t\t\t\tref=\"fileInput\"\n\t\t\t\tclass=\"file-input\"\n\t\t\t\ttype=\"file\"\n\t\t\t\tmultiple\n\t\t\t\taccept=\"image/*\"\n\t\t\t\t@change=\"fileInputChanged\"\n\t\t\t>\n\t\t\t<div class=\"weight-500 text-center\"\n\t\t\t\t:class=\"theme.color + '--text'\"\n\t\t\t>\n\t\t\t\tDrag and drop images or\n\t\t\t</div>\n\t\t\t<div class=\"px-2\">\n\t\t\t\t<v-btn outlined\n\t\t\t\t\t:color=\"theme.color\"\n\t\t\t\t\trounded class=\"weight-700\"\n\t\t\t\t\t@click=\"$refs.fileInput.click()\"\n\t\t\t\t>\n\t\t\t\t\tUpload\n\t\t\t\t</v-btn>\n\t\t\t</div>\n\t\t</v-card>\n\t</div>\n</template>\n\n<script>\nimport {mapGetters} from \"vuex\";\nimport PostMixin from \"@/mixin/PostMixin.js\";\nimport FilesMixin from \"@/mixin/FilesMixin.js\";\nimport Snack from \"@/mixin/Snack.js\";\n\nexport default {\n\tname: \"SubmitMedia\",\n\tmixins: [PostMixin, FilesMixin, Snack],\n\tprops: {\n\t\ttheme: {type: Object, required: true},\n\t\tpayload: {type: Object, required: true},\n\t},\n\tcomputed: {\n\t\t...mapGetters(\"publication\", [\"inProgress\"])\n\t},\n\tmethods: {\n\t\tpostImage(item, index) {\n\t\t\tconst id = this.inProgress.id\n\t\t\tconst url = this.$util.format(this.$urls.image.publication, id)\n\t\t\tconst fd = this.$helper.createFormData({image: this.files[index]})\n\t\t\tthis.post(url, fd).then(() => {\n\t\t\t\tif (this.success) {\n\t\t\t\t\tthis.removeFile(item, index)\n\t\t\t\t\tthis.$emit(\"refresh\")\n\t\t\t\t} else {\n\t\t\t\t\tthis.openSnack(\"Sorry, something went wrong.\")\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubmitMedia.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubmitMedia.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SubmitMedia.vue?vue&type=template&id=1170ed34&scoped=true&\"\nimport script from \"./SubmitMedia.vue?vue&type=script&lang=js&\"\nexport * from \"./SubmitMedia.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1170ed34\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VScaleTransition } from 'vuetify/lib/components/transitions';\ninstallComponents(component, {VBtn,VCard,VCol,VIcon,VRow,VScaleTransition})\n"],"sourceRoot":""}