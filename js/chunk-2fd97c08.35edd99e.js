(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fd97c08","chunk-2b06b954"],{5802:function(t,e,n){"use strict";var i=n("1da1"),r=n("5530"),o=(n("d3b7"),n("159b"),n("96cf"),n("c473")),s=n("2f62"),a={mixins:[o["a"]],emits:["refreshMe","refreshCommunity","startNew"],data:function(){return{confirmSuccess:!1,confirmErrors:{},confirmResponse:null}},computed:Object(r["a"])({},Object(s["b"])("confirmDialog",["dialogState","dialogMessage","dialogMethod","dialogUrl","dialogPayload","dialogParams","dialogSuccessEvents","dialogSuccessMessage","dialogFailureMessage"])),methods:{closeConfirmDialog:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("confirmDialog/close");case 2:case"end":return e.stop()}}),e)})))()},proceedConfirmDialog:function(){var t=this;this.$axios.send(this.dialogMethod,this.dialogUrl,this.dialogPayload,this.dialogParams).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.confirmResponse=n,t.confirmSuccess=!0,t.confirmErrors={},t.openSuccessSnack(t.dialogSuccessMessage),t.dialogSuccessEvents.forEach((function(e){t.$emit(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var n;console.debug(e),t.confirmResponse=e.response,t.confirmSuccess=!1,t.confirmErrors=null===(n=e.response)||void 0===n?void 0:n.data,t.openSnack(t.dialogFailureMessage)})).finally(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.closeConfirmDialog();case 2:case"end":return e.stop()}}),e)}))))},openConfirmDialog:function(t){var e=arguments,n=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var r,o,s,a,c,l,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:"",o=e.length>2?e[2]:void 0,s=e.length>3?e[3]:void 0,a=e.length>4?e[4]:void 0,c=e.length>5?e[5]:void 0,l=e.length>6&&void 0!==e[6]?e[6]:null,u=e.length>7&&void 0!==e[7]?e[7]:null,i.next=9,n.$store.dispatch("confirmDialog/setDialogMessage",t);case 9:return i.next=11,n.$store.dispatch("confirmDialog/setMethod",r.toUpperCase());case 11:return i.next=13,n.$store.dispatch("confirmDialog/setUrl",o);case 13:return i.next=15,n.$store.dispatch("confirmDialog/setSuccessEvents",s);case 15:return i.next=17,n.$store.dispatch("confirmDialog/setSuccessMessage",a);case 17:return i.next=19,n.$store.dispatch("confirmDialog/setFailureMessage",c);case 19:if(!l){i.next=22;break}return i.next=22,n.$store.dispatch("confirmDialog/setPayload",l);case 22:if(!u){i.next=25;break}return i.next=25,n.$store.dispatch("confirmDialog/setParams",u);case 25:return i.next=27,n.$store.dispatch("confirmDialog/setDialog",!0);case 27:case"end":return i.stop()}}),i)})))()}}};e["a"]=a},5987:function(t,e,n){"use strict";var i=n("1da1"),r=n("5530"),o=(n("99af"),n("96cf"),n("2f62")),s=n("5f3b"),a=n("c473"),c={mixins:[s["a"],a["a"]],data:function(){return{reportPayload:{title:null,content:null},resolvePayload:{resolve_text:null}}},computed:Object(r["a"])({dialog:{get:function(){return this.$store.getters["dialog/report"]},set:function(t){this.SET_REPORT(!!t)}}},Object(o["b"])({toReport:"dialog/object",model:"dialog/model",mod:"dialog/mod"})),methods:Object(r["a"])(Object(r["a"])({},Object(o["c"])("dialog",["SET_REPORT"])),{},{openReportDialog:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.$store.dispatch("dialog/setReportInView",{model:t,object:e});case 2:case"end":return i.stop()}}),i)})))()},closeReportDialog:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("dialog/clearDialog");case 2:case"end":return e.stop()}}),e)})))()},submitReport:function(){var t=this,e=this.model,n=this.toReport,o="".concat(e,"/").concat(n.id,"/report/");this.post(o,Object(r["a"])({},this.reportPayload)).then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.success){e.next=7;break}return t.openSuccessSnack("Report added successfully."),t.reason=null,e.next=5,t.closeReportDialog();case 5:e.next=8;break;case 7:t.openSnack("Sorry, your report could not be posted.");case 8:case"end":return e.stop()}}),e)}))))}})};e["a"]=c},"5f3b":function(t,e,n){"use strict";n("d3b7");var i={data:function(){return{posting:!1,postInstance:null,formErrors:{},statusCode:null,success:!1}},methods:{post:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.posting=!0,this.$axios.send("POST",t,n,i).then((function(t){e.success=!0,e.postInstance=t.data,e.formErrors={}})).catch((function(t){console.debug(t),e.success=!1,e.postInstance=null,e.statusCode=t.response.status,e.formErrors=t.response.data})).finally((function(){e.posting=!1}))}}};e["a"]=i},6397:function(t,e,n){"use strict";var i=n("1da1"),r=n("5530"),o=(n("96cf"),n("2f62")),s={data:function(){return{refreshing:!1}},computed:Object(r["a"])({},Object(o["b"])({me:"user/current"})),methods:{refreshMe:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===(n=t.me)||void 0===n||!n.id){e.next=12;break}return t.refreshing=!0,e.prev=2,e.next=5,t.$axios.get(t.$urls.user.me);case 5:return i=e.sent,t.$helper.setCurrentUser(i),e.next=9,t.$store.dispatch("user/setCurrentUser",i);case 9:return e.prev=9,t.refreshing=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[2,,9,12]])})))()}}};e["a"]=s},"7af0":function(t,e,n){"use strict";n("d480")},"9ede":function(t,e,n){"use strict";var i=n("1da1"),r=(n("96cf"),n("99af"),n("6397")),o={mixins:[r["a"]],methods:{sendActionRequest:function(t){var e=this,n=t.id,r=t.payload,o=t.action,s=t.revoke,a=void 0!==s&&s,c=t.model,l=void 0===c?"publication":c,u=a?"".concat(o,"/").concat(n,"/"):"".concat(l,"/").concat(n,"/").concat(o,"/"),d=a?"DELETE":"POST";this.$axios.send(d,u,r).then(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("init"),t.next=3,e.refreshMe();case 3:case"end":return t.stop()}}),t)})))).catch((function(){e.openSnack("Something went wrong.")}))}}};e["a"]=o},c473:function(t,e,n){"use strict";var i=n("5530"),r=n("2f62"),o={methods:Object(i["a"])(Object(i["a"])({},Object(r["c"])("snack",["SET_SNACK","SET_COLOR","SET_TEXT","SET_LINE","SET_TIMEOUT"])),{},{openSnack:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.color,i=void 0===n?"error":n,r=e.timeout,o=void 0===r?3e3:r,s=e.multiline,a=void 0!==s&&s;this.SET_SNACK(!0),this.SET_TIMEOUT(o),this.SET_LINE(a),this.SET_TEXT(t),this.SET_COLOR(i)},openSuccessSnack:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.color,i=void 0===n?"success":n,r=e.timeout,o=void 0===r?3e3:r,s=e.multiline,a=void 0!==s&&s;this.SET_SNACK(!0),this.SET_TIMEOUT(o),this.SET_LINE(a),this.SET_TEXT(t),this.SET_COLOR(i)}})};e["a"]=o},d480:function(t,e,n){},ec64:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{staticClass:"py-0",attrs:{flat:""}},[n("v-list-item-group",{staticClass:"comment-item-wrapper"},[n("v-list-item",{staticClass:"comment-item"},[t.replies.length?n("div",{staticClass:"bottom-field-line"}):t._e(),n("div",{staticClass:"bottom-end-line-outer"}),n("v-list-item-avatar",[n("wc-avatar",{attrs:{size:"30",color:"grey",src:t.comment.created_by.avatar,text:t.comment.created_by.username,"span-class":"full-width text-center px16 weight-500 white--text"}})],1),n("v-list-item-content",{staticClass:"pl-4"},[n("v-list-item-subtitle",{staticClass:"d-flex align-center px14"},[n("div",[t._v(t._s(t.comment.created_by.username))]),n("div",[n("v-icon",[t._v("mdi-circle-small")])],1),n("div",[t._v(t._s(t.$moment(t.comment["created_at"]).fromNow()))])]),n("v-list-item-title",{staticClass:"comment-text px16"},[n("v-slide-x-transition",[t.editComment?n("comment-field",{attrs:{target:t.comment,"edit-mode":!0},on:{init:function(e){return t.handleInit()}}}):n("div",[t._v(" "+t._s(t.comment.comment)+" ")])],1)],1),n("v-list-item-subtitle",{staticClass:"d-flex align-center pt-2"},[n("v-btn",{attrs:{icon:"",small:"",color:t.myUpVote()?"primary":"grey"},on:{click:function(e){return t.sendUpVote()}}},[n("v-icon",[t._v("mdi-chevron-up")])],1),n("div",{staticClass:"px-1"},[t._v(" "+t._s(t.comment["popularity"])+" ")]),n("v-btn",{attrs:{icon:"",small:"",color:t.myDownVote()?"primary":"grey"},on:{click:function(e){return t.sendDownVote()}}},[n("v-icon",[t._v("mdi-chevron-down")])],1),n("v-btn",{staticClass:"mx-1",attrs:{small:"",rounded:"",depressed:""},on:{click:function(e){t.addReply=!t.addReply}}},[n("v-icon",[t._v("mdi-reply-outline")]),t._v(" Reply ")],1),n("v-btn",{attrs:{small:"",text:"",rounded:""},on:{click:function(e){return t.createShare()}}},[t._v(" Share ")]),t.isMyItem?t._e():n("v-btn",{attrs:{small:"",text:"",rounded:""},on:{click:function(e){return t.bookmark()}}},[t._v(" Save ")]),t.isMyItem?t._e():n("v-btn",{attrs:{small:"",text:"",rounded:""},on:{click:function(e){return t.addReport()}}},[t._v(" Report ")]),t.isMyItem?t._e():n("v-btn",{attrs:{small:"",text:"",rounded:""},on:{click:function(e){return t.hide()}}},[t._v(" HIDE ")]),t.isMyItem?n("v-btn",{attrs:{text:"",small:"",rounded:""},on:{click:function(e){return t.initCommentEdit()}}},[t._v(" EDIT ")]):t._e(),t.isMyItem?n("v-btn",{attrs:{text:"",small:"",rounded:""},on:{click:function(e){return t.initCommentDelete()}}},[t._v(" DELETE ")]):t._e()],1)],1)],1),n("v-scale-transition",[t.addReply?n("v-list-item",{staticClass:"field-wrapper py-4 align-start",scopedSlots:t._u([{key:"default",fn:function(){return[n("div",{staticClass:"last-reply-line"}),t.replies.length>0?n("div",{staticClass:"field-line"}):t._e(),n("reply-field",{attrs:{comment:t.comment},on:{init:function(e){return t.$emit("init")}}})]},proxy:!0}],null,!1,1934846030)}):t._e()],1)],1),n("v-list-item-group",{staticClass:"replies"},t._l(t.replies,(function(e,i){return n("v-list-item",{key:i,staticClass:"comment-item",class:{reply:i+1!==t.replies.length,"last-reply":i+1===t.replies.length}},[0!==i?n("div",{staticClass:"top-field-line"}):t._e(),i+1!==t.replies.length?n("div",{staticClass:"bottom-field-line"}):t._e(),n("div",{staticClass:"bottom-end-line"}),n("wc-avatar",{staticClass:"comment-avatar",attrs:{size:"30",color:"grey",src:t.comment.created_by.avatar,text:t.comment.created_by.username,"span-class":"full-width text-center px16 weight-500 white--text"}}),n("v-list-item-content",{staticClass:"pl-3"},[n("v-list-item-subtitle",{staticClass:"d-flex align-center px14"},[n("div",[t._v(t._s(e.created_by.username))]),n("div",[n("v-icon",[t._v("mdi-circle-small")])],1),n("div",[t._v(t._s(t.$moment(e.created_at).fromNow()))])]),n("v-list-item-title",{staticClass:"comment-text px16"},[n("v-slide-x-transition",[t.editReply?n("comment-field",{attrs:{target:e,"edit-mode":!0},on:{init:function(e){return t.handleInit()}}}):n("div",[t._v(" "+t._s(e.comment)+" ")])],1)],1),n("v-list-item-subtitle",{staticClass:"d-flex align-center"},[n("v-btn",{attrs:{icon:"",color:t.myUpVote(e)?"primary":"grey",small:""},on:{click:function(n){return t.sendUpVote(e)}}},[n("v-icon",[t._v("mdi-chevron-up")])],1),n("div",{staticClass:"px-1"},[t._v(" "+t._s(e["popularity"])+" ")]),n("v-btn",{attrs:{icon:"",small:"",color:t.myDownVote(e)?"primary":"grey"},on:{click:function(n){return t.sendDownVote(e)}}},[n("v-icon",[t._v("mdi-chevron-down")])],1),n("v-btn",{attrs:{small:"",text:"",rounded:""},on:{click:function(n){return t.createShare(e)}}},[t._v(" Share ")]),t.isMyReply(e)?t._e():n("v-btn",{attrs:{small:"",text:"",rounded:""},on:{click:function(n){return t.bookmark(e)}}},[t._v(" Save ")]),t.isMyReply(e)?t._e():n("v-btn",{attrs:{small:"",text:"",rounded:""},on:{click:function(n){return t.addReport(e)}}},[t._v(" Report ")]),t.isMyReply(e)?t._e():n("v-btn",{attrs:{small:"",text:"",rounded:""},on:{click:function(n){return t.hide(e)}}},[t._v(" HIDE ")]),t.isMyReply(e)?n("v-btn",{attrs:{text:"",small:"",rounded:""},on:{click:function(n){return t.initCommentEdit(e)}}},[t._v(" EDIT ")]):t._e(),t.isMyReply(e)?n("v-btn",{attrs:{text:"",small:"",rounded:""},on:{click:function(n){return t.initCommentDelete(e.id)}}},[t._v(" DELETE ")]):t._e()],1)],1)],1)})),1),n("confirm-dialog",{on:{init:function(e){return t.handleInit()}}})],1)},r=[],o=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("5f3b")),s=n("c473"),a=n("1da1"),c=n("5530"),l=(n("96cf"),n("7db0"),n("2f62")),u=n("9ede"),d=n("5987"),m="comment",h={mixins:[s["a"],u["a"],d["a"]],data:function(){return{clipboardContent:null}},computed:Object(c["a"])(Object(c["a"])({},Object(l["b"])({currentUser:"user/current"})),{},{reactions:function(){return this.comment["popularity"]+this.comment["dislikes"]},isMyItem:function(){return!!this.currentUser&&this.comment.created_by.id===this.currentUser.id}}),methods:{getLink:function(){return"something"},copyLink:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.comment),navigator.clipboard.writeText(this.getLink(e)).then((function(){t.clipboardContent=!0,t.openSnack("Publication link copied to the clipboard",{color:"success"})}))},myUpVote:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t||(t=this.comment),!!this.currentUser&&this.currentUser["my_votes"].find((function(e){var n;return e.up&&(null===(n=e[m])||void 0===n?void 0:n.id)===t.id}))},myDownVote:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t||(t=this.comment),!!this.currentUser&&this.currentUser["my_votes"].find((function(e){var n;return!e.up&&(null===(n=e[m])||void 0===n?void 0:n.id)===t.id}))},myHide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t||(t=this.comment),!!this.currentUser&&this.currentUser["my_hides"].find((function(e){var n;return(null===(n=e[m])||void 0===n?void 0:n.id)===t.id}))},myBookmark:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t||(t=this.comment),!!this.currentUser&&this.currentUser["my_bookmarks"].find((function(e){var n;return(null===(n=e[m])||void 0===n?void 0:n.id)===t.id}))},bookmark:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.comment),this.sendActionRequest({model:m,action:"bookmark",revoke:!!this.myBookmark(t),id:this.myBookmark(t)?this.myBookmark(t).id:t.id})},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.comment),this.sendActionRequest({model:m,action:"hide",revoke:!!this.myHide(t),id:this.myHide(t)?this.myHide(t).id:t.id})},addReport:function(){var t=arguments,e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:null,i||(i=e.comment),n.next=4,e.openReportDialog(m,i);case 4:case"end":return n.stop()}}),n)})))()},sendUpVote:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.comment);var e=this.myUpVote(t);this.sendActionRequest({model:m,action:e?"vote":"up-vote",revoke:!!e,id:e?e.id:t.id})},sendDownVote:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.comment);var e=this.myDownVote(t);this.sendActionRequest({model:m,action:e?"vote":"down-vote",revoke:!!e,id:e?e.id:t.id})},createShare:function(){var t=arguments,e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:null,i=e.comment,n.next=4,e.$store.dispatch("dialog/clearDialog");case 4:return n.next=6,e.$store.dispatch("dialog/setShareInView",{model:m,object:i});case 6:case"end":return n.stop()}}),n)})))()}}},v=h,p=n("5802"),f={name:"CommentItem",mixins:[o["a"],s["a"],v,p["a"]],components:{CommentField:function(){return Promise.all([n.e("chunk-ec2a30da"),n.e("chunk-180e66c4")]).then(n.bind(null,"395e"))},ReplyField:function(){return Promise.all([n.e("chunk-ec2a30da"),n.e("chunk-1741fd5b")]).then(n.bind(null,"45f6"))}},props:{index:{type:Number,required:!0},comment:{type:Object,required:!0},count:{type:Number,required:!0}},data:function(){return{addReply:!1,editComment:!1,editReply:!1}},computed:{replies:function(){return this.comment.replies}},methods:{isMyReply:function(t){return this.$helper.ifCurrentUserIs(t.created_by)},initCommentEdit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?this.editReply=!this.editReply:this.editComment=!this.editComment},initCommentDelete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.comment.id),this.openConfirmDialog("Are you sure you want to delete this comment?","DELETE",this.$util.format(this.$urls.comment.detail,t),["init"],"Comment removed successfully.","Sorry, something went wrong,")},handleInit:function(){this.editComment=!1,this.editReply=!1,this.$emit("init")}}},g=f,b=(n("7af0"),n("2877")),y=n("6544"),_=n.n(y),x=n("8336"),k=n("132d"),w=n("8860"),R=n("da13"),C=n("8270"),E=n("5d23"),S=n("1baa"),T=n("0789"),D=Object(b["a"])(g,i,r,!1,null,"f3c524d6",null);e["default"]=D.exports;_()(D,{VBtn:x["a"],VIcon:k["a"],VList:w["a"],VListItem:R["a"],VListItemAvatar:C["a"],VListItemContent:E["b"],VListItemGroup:S["a"],VListItemSubtitle:E["c"],VListItemTitle:E["d"],VScaleTransition:T["e"],VSlideXTransition:T["g"]})}}]);
//# sourceMappingURL=chunk-2fd97c08.35edd99e.js.map